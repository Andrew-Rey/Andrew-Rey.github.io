<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>DeepLearning | Quick Start II | Andrew-Rey</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Deep learning,tutorial,lhy-ML," />
  

  <meta name="description" content="Is it must be overfitting when the loss is not small? Infact there are two possible reasons for this situation. The one is model bias and the other is the poor optimization.">
<meta property="og:type" content="article">
<meta property="og:title" content="DeepLearning | Quick Start II">
<meta property="og:url" content="https://andrew-rey.github.io/2023/11/24/DL/learn-2/index.html">
<meta property="og:site_name" content="Andrew-Rey">
<meta property="og:description" content="Is it must be overfitting when the loss is not small? Infact there are two possible reasons for this situation. The one is model bias and the other is the poor optimization.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://andrew-rey.github.io/2023/11/24/DL/learn-2/image.png">
<meta property="article:published_time" content="2023-11-24T06:16:26.000Z">
<meta property="article:modified_time" content="2023-12-21T01:50:03.356Z">
<meta property="article:tag" content="Deep learning">
<meta property="article:tag" content="tutorial">
<meta property="article:tag" content="lhy-ML">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://andrew-rey.github.io/2023/11/24/DL/learn-2/image.png">

  

  
    <link rel="icon" href="/images/head_round.png">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/site.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">🌈</span>
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/>
<link rel="stylesheet" href="/css/prism.css">

<div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">🌈</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            Archives
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/categories/"
            rel="noopener noreferrer"
            target="_self"
            >
            Categories
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            Tags
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            About
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#questions-when-training"><span class="toc-text">Questions when training</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#big-loss-when-training"><span class="toc-text">Big loss when training</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#overfitting"><span class="toc-text">Overfitting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#model-selection"><span class="toc-text">Model selection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#optimization"><span class="toc-text">Optimization</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-DL/learn-2" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">DeepLearning | Quick Start II</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2023.11.24</span>
      </span>

      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/DL/">DL</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>Is it must be overfitting when the loss is not small? Infact there
are two possible reasons for this situation. The one is model bias and
the other is the poor optimization.</p>
<span id="more"></span>
<h2 id="questions-when-training">Questions when training</h2>
<h3 id="big-loss-when-training">Big loss when training</h3>
<blockquote>
<p>Notice that this situation appears in
<strong><em>training</em></strong> step</p>
</blockquote>
<p>If you get the big loss when training the network, one prossible
reason is the model bias, which means you may try other bigger model
with more elasticity; the other reason is the optimizer works poor.</p>
<p>How two judge the two situation? If you get bigger loss
<strong><em>not only</em></strong> in test set, <strong><em>but
also</em></strong> in train set compared to a smaller model, the most
possible reason is the weak optimizer.</p>
<figure>
<img src="/2023/11/24/DL/learn-2/image.png" alt="big loss">
<figcaption aria-hidden="true">big loss</figcaption>
</figure>
<h3 id="overfitting">Overfitting</h3>
<p>Small loss in training set but big in testing set.</p>
<p>Solutions:</p>
<ul>
<li>Expend the training data
<ul>
<li>collect more training data</li>
<li>data augmentation (must be suitable for the training task)</li>
</ul></li>
<li>Constrain the model, decrease the flexibility
<ul>
<li>less parameters (less neuron)</li>
<li>shareing parameters</li>
<li>less features</li>
<li>early stop</li>
<li>regularization</li>
<li>dropout</li>
</ul></li>
</ul>
<h3 id="model-selection">Model selection</h3>
<p>Cross validation: split your training set into validation set and
training set, use validation set to select model</p>
<ul>
<li>k-folder method</li>
</ul>
<h3 id="optimization">Optimization</h3>
<p>Gradient nears to zero but loss still big, maybe the model is still
on the <strong><em>critical point</em></strong> (gradient equals to
zero, not only the local minima but also the saddle point).</p>
<p>Suppose the loss function is zero at point <span class="math inline">\(\theta^{\prime}\)</span>, use Taylor formula to
estimate the value of loss around point <span class="math inline">\(\theta\)</span></p>
<p><span class="math display">\[
L(\theta) \approx L(\theta^{\prime}) + (\theta - \theta^{\prime})^T
L^{\prime}(\theta^{\prime}) +  (\theta - \theta^{\prime})^T
\mathbf{H}  (\theta - \theta^{\prime})
\]</span></p>
<p>where <span class="math inline">\(\mathbf{H}\)</span> is the
<em>Hessian</em> matrix <span class="math inline">\(H_{ij}=\frac{\partial}{\partial \theta_i \partial
\theta_j}L(\theta)\)</span>.</p>
<p>Considerring that the <em>gradient</em> is zero, namely <span class="math inline">\(L^{\prime}(\theta^{\prime}) = 0\)</span></p>
<p><span class="math display">\[
L(\theta) \approx L(\theta^{\prime}) + v^T \mathbf{H} v
\]</span></p>
<p>where <span class="math inline">\(v = \theta -
\theta^{\prime}\)</span>. <u>For all</u> <span class="math inline">\(v\)</span>:</p>
<ul>
<li>if <span class="math inline">\(v^T \mathbf{H} v &gt; 0\)</span>,
namely <span class="math inline">\(\mathbf{H}\)</span> is <em>positive
definite</em> (all eigen values are above zero): <span class="math inline">\(L(\theta) &gt; L(\theta^{\prime})\)</span>, which
means the point <span class="math inline">\(\theta^{\prime}\)</span> is
a <strong><em>local minima</em></strong></li>
<li>if <span class="math inline">\(v^T \mathbf{H} v &lt; 0\)</span>,
namely <span class="math inline">\(\mathbf{H}\)</span> is <em>negtive
definite</em> (all eigen values are below zero): <span class="math inline">\(L(\theta) &lt; L(\theta^{\prime})\)</span>, which
means the point <span class="math inline">\(\theta^{\prime}\)</span> is
a <strong><em>local maxima</em></strong></li>
<li>if sometimes <span class="math inline">\(v^T \mathbf{H} v &gt;
0\)</span> while sometimes <span class="math inline">\(v^T \mathbf{H} v
&lt; 0\)</span>, the point is a <strong><em>saddle
point</em></strong></li>
</ul>
<p>So <strong><em>one way</em></strong> to judge the type of criticle
point is to calculate all the eigen value of Hessian and see the sign of
them</p>
<ul>
<li>escape saddle point: the loss can be updated (continue to decrease)
towards the eigen vector's direction: <span class="math inline">\(L(\theta) \approx L(\theta^{\prime}) + v^T
\mathbf{H} v = L(\theta^{\prime}) + \lambda ||\mathbf{u}||\)</span>
where <span class="math inline">\(\mathbf{u}\)</span> is the eigen
vector for the <em>positive</em> eigen value</li>
</ul>
<blockquote>
<p><em>local minima</em> and <em>saddle point</em>:</p>
<ul>
<li>Which one appears more frequently in the practice? There is a
hypothesis. Suppose a local minima for a 1-dimmension independent
variable, such as the quadratic function, it has a local minima. But put
it to the 2-dimmension space, the local minima may convert into a saddle
point. So the hypothesis is that if there is a local minima point, it
can be converted into a saddle point in an enough high space. The big
model nowadays has millons of parameters in loss function, so there must
be lots of saddle point that gradient equaling to zero but can being
decreased. The saddle points are more common.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>batch</strong>: divide all training set into small
<em>batches</em>, for <strong><em>every batch</em></strong>, calculate
the loss gradient, update parameters. The process that all batches had
been seen is called an <strong><em>epoch</em></strong>.
<strong><em>Shuffle</em></strong> all batches after one epoch. Why use
batch? Decreasing the noise steps when updating the parameters and the
parallel calculation.</p>
</blockquote>

    
  </div>

</article>


   

   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2023/11/24/DL/learn-1/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2023/12/02/Papers/tatt/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>



<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
<script>
    $(".article-content img").wrap(function() {
        return '<a data-fancybox href="' + $(this).attr("src") + '"/>';
    });
</script>


  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              Archives
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/categories/"
              rel="noopener noreferrer"
              target="_self"
              >
              Categories
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              Tags
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              About
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '277317290454635afa73',
  clientSecret: '78223c859304da5e8d71bfce136d436c6ff95c37',
  repo: 'blog-comment',
  owner: 'forsigner',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['forsigner'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
