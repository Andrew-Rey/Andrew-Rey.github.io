<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Unity Development | Poem2Scene | Andrew-Rey</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Unity3D,Project," />
  

  <meta name="description" content="vr scenes generation based on poem texts.  unity3d based htc vive  framework   1699165642361  A simple framework of this project is shown above (maybe the light theme is reccomended to chec">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity Development | Poem2Scene">
<meta property="og:url" content="https://andrew-rey.github.io/2023/11/05/Project/poem2scene/index.html">
<meta property="og:site_name" content="Andrew-Rey">
<meta property="og:description" content="vr scenes generation based on poem texts.  unity3d based htc vive  framework   1699165642361  A simple framework of this project is shown above (maybe the light theme is reccomended to chec">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://andrew-rey.github.io/2023/11/05/Project/poem2scene/1699165642361.png">
<meta property="og:image" content="https://andrew-rey.github.io/2023/11/05/Project/poem2scene/image.png">
<meta property="og:image" content="https://andrew-rey.github.io/2023/11/05/Project/poem2scene/1699168066108.png">
<meta property="article:published_time" content="2023-11-05T06:24:17.000Z">
<meta property="article:modified_time" content="2023-11-10T15:59:32.256Z">
<meta property="article:tag" content="Unity3D">
<meta property="article:tag" content="Project">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://andrew-rey.github.io/2023/11/05/Project/poem2scene/1699165642361.png">

  

  
    <link rel="icon" href="/images/head_round.png">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/site.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">🌈</span>
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/>
<link rel="stylesheet" href="/css/prism.css">

<div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">🌈</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            Archives
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/categories/"
            rel="noopener noreferrer"
            target="_self"
            >
            Categories
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            Tags
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            About
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#framework"><span class="toc-text">framework</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#terrain"><span class="toc-text">terrain</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#noise-based-terrain"><span class="toc-text">noise based terrain</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scheduleprogress"><span class="toc-text">schedule&#x2F;progress</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Project/poem2scene" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Unity Development | Poem2Scene</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2023.11.05</span>
      </span>

      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Project/">Project</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>vr scenes generation based on poem texts.</p>
<ul>
<li>unity3d based</li>
<li>htc vive</li>
</ul>
<h2 id="framework">framework</h2>
<figure>
<img src="/2023/11/05/Project/poem2scene/1699165642361.png" alt="1699165642361">
<figcaption aria-hidden="true">1699165642361</figcaption>
</figure>
<p>A simple framework of this project is shown above (maybe the
<em>light theme</em> is reccomended to check the diagram). A simple idea
is that the generated contents can be divided into <code>layer</code>s,
and we want to controll the generation processes of layers. Such as we
firstly generate <code>terrain</code> layer and define its materials and
textures later in biome layer. The benefits is that the layers are
generated in a more dynamic way: materials and textures are not
specified in advance, but generated according to not only the texts but
also the terrain layer. And so as the later layers.</p>
<h2 id="terrain">terrain</h2>
<ul>
<li>default: noise based</li>
<li>text: ai based</li>
</ul>
<h3 id="noise-based-terrain">noise based terrain</h3>
<p>It is known that <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Perlin_noise">Perlin noise</a> has a
excellent perfromation in terrain/ocean wave/textures generation. And
the mainly noise we used in this project is Perlin noise, but we used
<strong>2 layers</strong>, which can simulate more abundant
terrains.</p>
<p>The terrain layer generation parameters are shown as follow.</p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token comment">// global configuration</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">int</span></span>    HeightMapRandomSeed        <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">int</span></span>    HeightMapLength            <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span>  HeightMapSampleFrequencies <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">float</span></span>  HeightMapScaler            <span class="token operator">=</span> <span class="token number">5f</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">int</span></span>    TerrainLayerLength         <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">float</span></span>  TerrainLayerMaxHeight      <span class="token operator">=</span> <span class="token number">1000f</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">string</span></span> TerrainNodeName            <span class="token operator">=</span> <span class="token string">"TerrainNode"</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">const</span>           <span class="token class-name"><span class="token keyword">string</span></span> TerrainLayerName           <span class="token operator">=</span> <span class="token string">"TerrainLayer"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>For one noise layer case, we use simplex noise based on Perlin noise
(namely overlay multiple <em>octaves</em> on the base noise). The result
is show in the image.</p>
<figure>
<img src="/2023/11/05/Project/poem2scene/image.png" alt="one-layer noise">
<figcaption aria-hidden="true">one-layer noise</figcaption>
</figure>
<p>We can see the result is realisitic in a way. However, the problem is
that, there are less reasonable places the our world. This generated
scene is more "noise", but our world has more terrain types such as
"plane". So we designed a two-layer noises to generate terrain and it
has a more reasonable result. Here is the image.</p>
<figure>
<img src="/2023/11/05/Project/poem2scene/1699168066108.png" alt="two-layer noise">
<figcaption aria-hidden="true">two-layer noise</figcaption>
</figure>
<p>For two-layer case, we controll the amplitudes of the "mountains"
using a strategy (by default, we use 1-frequency and 1-octave Perlin
noise). And the variance of terrain is more smooth and more "not
random".</p>
<h2 id="scheduleprogress">schedule/progress</h2>
<p><strong>23-11-07</strong> target:</p>
<ul>
<li>add start ui (simple version: v_1)
<ul>
<li><a target="_blank" rel="noopener" href="https://learn.unity.com/tutorial/creating-a-vr-menu-2019-2?uv=2019.4#">learn
the vr ui</a></li>
<li>use button-click to change scene (from start-scene to
main-scene)</li>
</ul></li>
<li>realize terrain real-time loading
<ul>
<li>define chunks</li>
<li>generate base map (defaultly include 16 by 16 chunks)</li>
<li>load chunk around the player (load 9 chunks and player is in the
center chunk)
<ul>
<li>check per-frame</li>
</ul></li>
<li>finish <code>MapLoader</code></li>
<li>finish <code>BaseMap</code></li>
<li>modified the map generation steps
<ul>
<li>when firstly load the game, generate whole resources used in the map
(height gradient meshes, amplitude gradient mesh, biome, decorations,
...), store them to resource file (why do we use this method -- dynamic
loading and promising the continuity between chunks)</li>
<li>generate chunks around the player, based on the gradient data</li>
<li>if enter a brand new area, load the gradient data and generate
chunks</li>
</ul></li>
</ul></li>
</ul>
<p><strong>23-11-08</strong> target:</p>
<ul>
<li>continue to complete the <code>MapLoader</code> and
<code>BaseMap</code>
<ul>
<li>generate <code>BaseMap</code> and divide it into chunks</li>
<li>store data into files</li>
</ul></li>
<li>clear up thinking
<ul>
<li>base-map has the total attributes of map, including terrain, biome,
building and weather properties</li>
<li>for the generation of base-map: just generate the related data and
store them into files</li>
<li>base-map-loader is used to load data and generate details of maps
around the player</li>
<li>every chunk is a smaller map, which means base-map is a
data-struct</li>
<li>chunk is also a game object, the parents node of terrain and the
decorations on it</li>
</ul></li>
</ul>
<p><strong>23-11-10</strong> target:</p>
<ul>
<li>rewrite <code>TerrainLayer</code> and <code>TerrainNode</code> and
<code>HeightMap</code>
<ul>
<li>support <em>chunk-like</em> terrains</li>
<li>provide more interfaces <em>to get the middle result or
data</em></li>
</ul></li>
<li>the whole project is ready to be in a mass...
<ul>
<li>arrange project structure</li>
</ul></li>
</ul>

    
  </div>

</article>


   

   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2023/11/04/SE/ruoyi-vue/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2023/11/11/PL/Racket-How-to-Launch-a-Rocket/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>



<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
<script>
    $(".article-content img").wrap(function() {
        return '<a data-fancybox href="' + $(this).attr("src") + '"/>';
    });
</script>


  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              Archives
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/categories/"
              rel="noopener noreferrer"
              target="_self"
              >
              Categories
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              Tags
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              About
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '277317290454635afa73',
  clientSecret: '78223c859304da5e8d71bfce136d436c6ff95c37',
  repo: 'blog-comment',
  owner: 'forsigner',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['forsigner'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
