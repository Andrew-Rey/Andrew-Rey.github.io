<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>C++ Programming | class template | Andrew-Rey</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="CS,C++," />
  

  <meta name="description" content="&quot;C++17类模板&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ Programming | class template">
<meta property="og:url" content="https://andrew-rey.github.io/2023/02/28/CS/class-template/index.html">
<meta property="og:site_name" content="Andrew-Rey">
<meta property="og:description" content="&quot;C++17类模板&quot;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://andrew-rey.github.io/2023/02/28/CS/class-template/type_traits.jpg">
<meta property="article:published_time" content="2023-02-28T12:21:43.000Z">
<meta property="article:modified_time" content="2023-11-11T12:50:23.626Z">
<meta property="article:tag" content="CS">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://andrew-rey.github.io/2023/02/28/CS/class-template/type_traits.jpg">

  

  
    <link rel="icon" href="/images/head_round.png">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/site.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">🌈</span>
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/>
<link rel="stylesheet" href="/css/prism.css">

<div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">🌈</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            Archives
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/categories/"
            rel="noopener noreferrer"
            target="_self"
            >
            Categories
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            Tags
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            About
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">类模板的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">类模板成员函数的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%87%8D%E5%A4%8D"><span class="toc-text">代码重复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-text">异常安全性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%B3%A8%E6%84%8F"><span class="toc-text">定义模板类注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-text">类模板实例化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%B1%BB%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0"><span class="toc-text">非类型的类模板参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">模板参数的默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E7%9A%84%E6%98%BE%E5%BC%8F%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-text">模板的显式实例化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%89%B9%E5%8C%96"><span class="toc-text">类模板特化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%AD%E4%BD%BF%E7%94%A8static_assert"><span class="toc-text">在类模板中使用static_assert()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8F%8B%E5%85%83"><span class="toc-text">类模板的友元</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-CS/class-template" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">C++ Programming | class template</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2023.02.28</span>
      </span>

      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/CS/">CS</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>"C++17类模板"</p>
<span id="more"></span>
<blockquote>
<p>编译器用于创建类的模板: 自动生成类</p>
<ul>
<li>标准库</li>
<li>类模板不是类, 是创建类的一种方式</li>
</ul>
</blockquote>
<blockquote>
<p>实例</p>
<ul>
<li>编译器从类模板中生成的类, 在第一次使用模板类型声明变量是,
会创建类模板的一个实例, 以后定义同类型的变量时,
会使用已创建的第一个实例. 在创建类模板时, 也可以不同时声明变量.</li>
<li>数据的组织 <strong>独立于</strong> 对象类型</li>
</ul>
</blockquote>
<h2 id="类模板的定义">类模板的定义</h2>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;typename T1, typename T2, Type Arg1&gt;
class ClassName {
    // template class definition
};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>模板参数</strong></p>
<ul>
<li><strong>类型参数</strong> <code>typename</code>
<ul>
<li>实参总是类型: <code>int</code>, <code>float</code>...</li>
</ul></li>
<li><strong>非类型参数</strong> <code>Type</code>
<ul>
<li>实参是整数类型的字面量: <code>200</code>, <code>10</code>...</li>
<li>整数常量表达式</li>
<li>指向对象的指针或引用, 函数指针或空指针</li>
</ul></li>
<li><strong>模板</strong>
<ul>
<li>实参是类模板的一个实例</li>
</ul></li>
</ul>
</blockquote>
<blockquote>
<p>在模板定义中, 不需要使用完整的ID, 例如构造函数</p>
<p><code>ClassName&lt;T1&gt;();</code>可以写成<code>ClassName();</code></p>
<p>不过在模板体的外部标识模板, 则必须使用模板ID
(即在模板类外定义模板中的成员函数时需要显式写出ID)</p>
</blockquote>
<p><strong>一个例子</strong></p>
<pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">template&lt;typename T1&gt;
class PythonList {
private:
    int len_;
    int size_;
    T1* elements_;

public:
    explicit PythonList&lt;T1&gt;(size_t list_len);
    PythonList&lt;T1&gt;(const PythonList&lt;T1&gt;&amp; python_list);
    ~PythonList();
    T1&amp; operator[](size_t index);
    const T1&amp; operator[](size_t index) const;
    PythonList&lt;T1&gt;&amp; operator=(const PythonList&lt;T1&gt;&amp; rhs_list);
    size_t get_len() const { return len_; }
    void allocate_double();
};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="类模板成员函数的定义">类模板成员函数的定义</h2>
<blockquote>
<p>若在模板类的内部定义, 实则为 <strong>内联</strong></p>
</blockquote>
<blockquote>
<p><strong>如何理解该语法</strong></p>
<ul>
<li>类模板的成员函数的外部定义本身就是函数模板,
即使成员函数不依赖类型参数.</li>
<li>若函数没有在类内定义, 则它需要一个模板定义.</li>
<li>定义函数模板中的参数列表必须与类模板参数列表相同.</li>
</ul>
</blockquote>
<p>例如</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// 析构函数
template &lt;typename T1&gt;
PythonList&lt;T1&gt;::~PythonList&lt;T1&gt;() {
    delete [] elements_;
}

// 构造函数
template &lt;typename T1&gt;
PythonList&lt;T1&gt;::PythonList(size_t list_len)
    : len_(list_len), size_(FOLD * list_len), elements_(new T1(list_len)) {}

template &lt;typename T1&gt;
PythonList&lt;T1&gt;::PythonList(const PythonList&lt;T1&gt; &amp;python_list)
    : PythonList{python_list.len_} {
  for (size_t i{}; i &lt; len_; ++i) {
    elements_[i] = python_list.elements_[i];
  }
}

// 下标运算符
template &lt;typename T1&gt; T1 &amp;PythonList&lt;T1&gt;::operator[](size_t index) {
  if (index &gt;= len_) {
    throw std::out_of_range{"Index out of range: " + std::to_string(index)};
  }
  return elements_[index];
}

template &lt;typename T1&gt;
const T1 &amp;PythonList&lt;T1&gt;::operator[](size_t index) const {
  if (index &gt;= len_) {
    throw std::out_of_range{"Index out of range: " + std::to_string(index)};
  }
  return elements_[index];
}

// 赋值运算符
template &lt;typename T1&gt;
PythonList&lt;T1&gt; PythonList&lt;T1&gt;::operator=(const PythonList&lt;T1&gt;&amp; rhs_list) {
    if (&amp;rhs_list != this) {
        delete [] elements_;
        len_ = rhs_list.len_;
        size_ = rhs_list.size_;
        elements_ = new T1[len_];
        for (size_t i {}; i &lt; size_; ++i) {
            elements_[i] = rhs_list.elements_[i];
        }
    }
    return *this;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>第一行说明该函数为模板函数; 在限定成员函数时,
作用域需要带上模板ID</p>
<p>有时候需要<strong>提供自己的拷贝构造(或析构)</strong>,
因为涉及到动态内存分配时, 默认拷贝构造(或析构)有可能会出现负面效应</p>
<p>在赋值重载时, 需要 <strong>检查左右操作数是否相等</strong>,
否则会释放<code>this</code>指向的对象后再进行复制.</p>
</blockquote>
<h3 id="代码重复">代码重复</h3>
<blockquote>
<p>在上述的定义中,
<code>const</code>的重载和非<code>const</code>的重载模板函数代码重复,
代码重复不利于后续的维护</p>
<ul>
<li>对抗重复的方法: <strong>函数, 模板, 基类</strong></li>
</ul>
</blockquote>
<p><strong>传统方法:
用<code>const</code>实现非<code>const</code></strong></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template &lt;typename T1&gt;
T1&amp; PythonList&lt;T1&gt;::operator[](size_t index) {
    return const_cast&lt;T1&amp;&gt;(static_cast&lt;const PythonList&lt;T1&gt;&amp;&gt;(*this) [index]);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>C++17:
<code>std::as_const()</code>(utility头文件)</strong></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template &lt;typename T1&gt;
T1&amp; PythonList&lt;T1&gt;::operator[](size_t index) {
    return const_cast&lt;T1&amp;&gt;(std::as_const(*this)[index]);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="异常安全性">异常安全性</h3>
<ol type="1">
<li>在赋值运算符重载的时候, 由于使用了<code>new</code>,
可能会出现<code>std::bad_alloc</code>异常</li>
<li>在<code>elements_[i] = rhs_list.elements_[i];</code>可能会出现关于类型<code>T1</code>的赋值异常</li>
</ol>
<blockquote>
<p>当声明了<code>noexcept</code>后, 表示代码内部不发生异常,
使得编译器能做更多的优化,
例如大部分析构都隐式声明了<code>noexcept</code> cppreference <a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/noexcept">noexcept</a></p>
</blockquote>
<blockquote>
<p>在以上的赋值运算符中使用 <strong>复制后交换</strong></p>
</blockquote>
<h3 id="定义模板类注意">定义模板类注意</h3>
<blockquote>
<ul>
<li>成员函数模板与类模板的定义放在同一个文件中: 当编译器生成类模板时,
需要去使用函数模板, 所以在使用模板的源文件中,
这些成员函数的定义必须可用.</li>
</ul>
</blockquote>
<h2 id="类模板实例化">类模板实例化</h2>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">PythonList&lt;double&gt; data {10};<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p><strong>编译器只编译程序使用的成员函数,
不会为某个模板参数的实例而一次性编译整个类</strong>:
例如上述代码编译后的类中只有构造函数和析构函数.</p>
</blockquote>
<blockquote>
<p>声明对象类型的指针 <strong>不会</strong> 创建模板实例:
<code>PythonList&lt;std::string&gt;* data_p;</code></p>
</blockquote>
<h2 id="非类型的类模板参数">非类型的类模板参数</h2>
<blockquote>
<p>主要用于定义指定容器有效的值, 如数组的维数</p>
<ul>
<li><strong>非类型参数只能是整数类型 (<code>size_t</code>,
<code>long</code>), 枚举类型, 对象的指针或引用, 函数的指针或引用,
类成员的指针</strong></li>
<li><strong>当作常量</strong></li>
</ul>
</blockquote>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;typename T1, size_t size&gt;
class ClassName {
    // definition
};

// 还有一些比较无语的
template&lt;typename T1, T1 value&gt; ... // 此时T1只能是模板的非类型参数所允许的类型<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>注意</strong></p>
<p>只有模板参数完全相同的情况下, 编译器才不会再次编译模板类;
任意一个不同, 编译器都会认为是不同的类, 后果是代码膨胀</p>
<ul>
<li>解决方法 (待定)</li>
</ul>
</blockquote>
<h2 id="模板参数的默认值">模板参数的默认值</h2>
<blockquote>
<p>与函数的默认参数类似</p>
<ul>
<li>如果某个模板参数有默认值, 则后续的参数也必须有默认值</li>
<li>如果某个模板参数的实参被省略, 则后续的所有实参也必须省略</li>
<li>不需要在成员函数的模板中指定默认值</li>
</ul>
</blockquote>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;typename T1 = int, int value = 10&gt; ...<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="模板的显式实例化">模板的显式实例化</h2>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template class ClassName&lt;T1, 10, ...&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>编译器会从模板中实例化所有的成员函数, 无论是否调用</p>
</blockquote>
<h2 id="类模板特化">类模板特化</h2>
<p>模板的使用中有时候只对 <strong>某些类型</strong> 有用,
而不支持其他类型; 因此使用 <strong>特化</strong> 来处理某些特殊情况.</p>
<p>例如整型变量的相等和浮点型的比较并不相同,
这时可以使用模板的特化来处理.</p>
<blockquote>
<p>对于类模板中的成员函数:</p>
<ul>
<li>如果成员函数是在类模板的外部定义的, 而不是在类模板体中定义的,
则可以提供函数模板的特化</li>
</ul>
</blockquote>
<p><strong>全特化</strong></p>
<p>即规定模板实现的所有模板参数</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;&gt;
class PythonList&lt;const char*&gt;{};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>特化的定义必须放在原有的定义或声明后面.
因为<strong>指定了所有参数</strong>, 所以是 <strong>全特化</strong></p>
</blockquote>
<p><strong>偏特化</strong></p>
<p>即只规定模板参数列表中的一部分模板参数</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;Type value&gt;
class PythonList&lt;const char*, value&gt; {};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p><code>template</code>后的参数列表包含的是为这个模板特化的实例所指定的参数,
即<strong>实例化时需要指定</strong><code>value</code></p>
<p>模板名后面的尖括号指定原有类模板定义中的参数如何特化.
<strong>该参数列表必须与原来未特化的类模板个数相同</strong></p>
</blockquote>
<blockquote>
<p><strong>指针类型的偏特化</strong></p>
<p>例如下面代码: <code>template</code>的第一个参数仍是<code>T1</code>,
但模板名后面可以跟着<code>T*</code></p>
</blockquote>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;typename T1, Type value&gt;
class ClassName&lt;T1*, value&gt; {};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>特化的选择</strong></p>
<p>当匹配给定特化的每个实参匹配多个特化时, 编译器会选择
<strong>最特殊</strong> 的一个特化.</p>
<ul>
<li>特殊是指有多个匹配, 如果符合A特化, 也符合B特化, 但反过来不行时,
则A比B更特殊 (A含于B)</li>
</ul>
</blockquote>
<h2 id="在类模板中使用static_assert">在类模板中使用<code>static_assert()</code></h2>
<p><code>static_assert()</code>接受两个参数,
第一个参数为<code>false</code>时, 输出第二个参数指定的消息.
第一个实参使用type_traits.h中的模板</p>
<figure>
<img src="/2023/02/28/CS/class-template/type_traits.jpg" alt="type_traits">
<figcaption aria-hidden="true">type_traits</figcaption>
</figure>
<h2 id="类模板的友元">类模板的友元</h2>
<p>对于友元函数和友元类的情况与一般情况相同</p>
<blockquote>
<p><strong>模板友元</strong></p>
<ul>
<li>类模板的参数列表一般包含定义友元模板的所有参数</li>
<li>如果类模板的一些参数在友元模板中没有,
则友元模板的实例会用于类模板的几个实例</li>
<li>普通类若有友元模板, 则友元的每一个实例都是这个类的友元</li>
</ul>
</blockquote>

    
  </div>

</article>


   

   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2022/08/21/ML/UNet/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2023/08/06/Unity/Tutorial-Movement/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>



<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
<script>
    $(".article-content img").wrap(function() {
        return '<a data-fancybox href="' + $(this).attr("src") + '"/>';
    });
</script>


  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              Archives
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/categories/"
              rel="noopener noreferrer"
              target="_self"
              >
              Categories
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              Tags
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              About
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '277317290454635afa73',
  clientSecret: '78223c859304da5e8d71bfce136d436c6ff95c37',
  repo: 'blog-comment',
  owner: 'forsigner',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['forsigner'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
