

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <!-- <link rel="dns-prefetch" href="//cdn.bootcss.com" /> -->
  <!-- <link rel="dns-prefetch" href="//cdn.mathjax.org" /> -->
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" href="/img/android-chrome-192x192.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="">
  <meta name="keywords" content="">
  
    <meta name="description" content="&quot;编译原理网课&quot; &quot;B站大学不用交学费!!!&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Compiler-zh">
<meta property="og:url" content="https://andrew-rey.github.io/2022/09/05/CS/Compiler-zh/index.html">
<meta property="og:site_name" content="Andrew-Rey">
<meta property="og:description" content="&quot;编译原理网课&quot; &quot;B站大学不用交学费!!!&quot;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://andrew-rey.github.io/index_imgs/compiler-zh.png">
<meta property="article:published_time" content="2022-09-05T08:23:27.000Z">
<meta property="article:modified_time" content="2023-01-03T09:43:15.192Z">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://andrew-rey.github.io/index_imgs/compiler-zh.png">
  
  
  <title>Compiler-zh - Andrew-Rey</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3696939_jf5k91uu0xi.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"andrew-rey.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":false,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.1.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<body>
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
    

<div class="header-inner" style="height: 80vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>AndrewRey</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg0.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Compiler-zh"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-05 16:23" pubdate>
          September 5, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.7k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          56 mins
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Compiler-zh</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on January 3, 2023 pm
                  
                
              </p>
            
            <div class="markdown-body">
              
              <p>"编译原理网课"</p>
<p>"B站大学不用交学费!!!"</p>
<span id="more"></span>
<h1 id="引论">引论</h1>
<p><strong>编译</strong>: 由高级语言转化为低级语言</p>
<p><strong>解释</strong>: 接受高级语言的 <strong>一个语句输入</strong>,
进行解释并执行, 立刻得到执行结果, 然后再接受下一句.</p>
<ul>
<li>不产生目标文件, 直观易懂, 结构简单, 易于人机对话</li>
<li>但效率低: 没有目标文件, 每次运行相当于要重新解释</li>
</ul>
<p><strong>编译的两个转换形式</strong></p>
<ul>
<li>编译 - 运行
<ul>
<li>先编译产生机器语言, 生成目标文件(.exe), 在运行时添加参数</li>
</ul></li>
<li>编译 - 汇编 - 运行
<ul>
<li>编译后产生汇编语言, 生成目标文件(.obj),
汇编语言汇编后产生机器语言</li>
</ul></li>
</ul>
<p><strong>编译过程</strong></p>
<p>源程序 -&gt; Lexical analyzer -&gt; Syntax analyzer -&gt; Semmantic
Analyzer -&gt; Intermediate code generation -&gt; Optimization -&gt;
Code generation -&gt; Target</p>
<p>symbol table management, error handler</p>
<h2 id="词法分析-lexical-analysis">词法分析 Lexical Analysis</h2>
<p>扫描源程序, 识别一个个 <strong>单词lexeme</strong>, 并进行
<strong>分类token</strong> (包括: keyword, constant, identifier,
operator, separator). 转化后的格式为 &lt;token-name, attr-value&gt;,
前者为token, 后者为 <strong>指向符号表的指针</strong>.</p>
<p>描述词法规则的有效工具是
<strong>正规式</strong>和<strong>有限自动机</strong></p>
<h2 id="语法分析-syntax-analysis">语法分析 Syntax Analysis</h2>
<p>把单词符号组成各类各类的语法单位, 如短语, 句子, 过程, 程序等</p>
<p>方法:</p>
<ul>
<li>derive:
<ul>
<li>最右推导: 每次将最右的部分按照规则进行转化</li>
<li>最左推导:</li>
</ul></li>
<li>reduce: 推导的逆过程
<ul>
<li>最左归约: 最右推导的逆过程</li>
<li>最右归约: 最左推导的逆过程</li>
</ul></li>
</ul>
<p>计算机处理方法: <strong>语法树</strong></p>
<h2 id="语义分析-semmantic-ananlysis">语义分析 Semmantic Ananlysis</h2>
<p>审查源程序有无语义错误, 为代码生成阶段收集类型信息. 重要的一步是
<strong>类型检查</strong></p>
<h2 id="中间代码生成-intermediate-code-generation">中间代码生成
Intermediate Code Generation</h2>
<p>中间代码设计原则</p>
<ul>
<li>容易生成</li>
<li>容易翻译为目标代码</li>
</ul>
<p>中间代码形式: 四元式, 三元式, 逆波兰式</p>
<ul>
<li>四元式: &lt;运算符, 操作数1, 操作数2, 结果&gt;</li>
</ul>
<h2 id="优化-optimization">优化 Optimization</h2>
<p>原则: <strong>等价变换</strong></p>
<p>主要方面: 公共子表达式的提取, 合并已知量, 删除无用语句, 循环优化</p>
<h2 id="目标代码生成-code-generation">目标代码生成 Code Generation</h2>
<p>将经过优化的中间代码转化为特定机器上的低级语言</p>
<p>目标代码的形式:</p>
<ul>
<li>绝对指令代码: 可立即执行的目标代码, 纯粹的0-1代码.</li>
<li>汇编指令代码: 汇编语言程序, 需要通过汇编程序汇编后才能运行,
能和物理机隔离.</li>
<li>可重定位指令代码: 先将各目标模块连接起来, 确定变量,
常数在主存中的位置, 装入主存后才能成为可以运行的绝对指令代码,
而后还需要进行 <strong>链接</strong>.</li>
</ul>
<h2 id="表格管理-symbol-table-management">表格管理 Symbol Table
Management</h2>
<p>用来记录源程序的各种信息和编译过程中的各种状况.</p>
<p>与编译前三段有关的表格有: 符号表, 常数表, 标号表, 分程序入口表,
中间代码表 <!-- 
### 符号表

| name | information |
|------|-------------|
| m | 整型, 变量地址 |
| n | 整型, 变量地址 |

### 常数表

|value|
|-----|
|1|
|4|

### 标号表

|name|information|
|----|-----------|
|xx|某句话|

*某句话是在 --></p>
<h2 id="错误处理-error-handler">错误处理 Error Handler</h2>
<p>如果源程序出错, 编译程序应该设法发现错误, 并报告给用户.</p>
<h2 id="其他概念">其他概念</h2>
<p><strong>趟/遍 pass</strong>: 将源程序从头到尾扫描一遍,
做相应的加工处理, 并生成相应的中间代码和目标代码.
多遍扫描可以节省内存空间, 提高目标代码质量, 使编译的逻辑结构更清楚,
但编译时间长, 因此 no free launch.</p>
<p>因此在一遍编译中:</p>
<p>源程序 -&gt; 编译程序 -&gt; 目标代码</p>
<p><strong>编译程序的编写</strong></p>
<ul>
<li>直接用机器语言</li>
<li>用汇编语言编写, 编译程序的核心部分常用汇编语言编写
<ul>
<li>编译程序怎么生成? 编译程序是用汇编语言编写的,
汇编语言经过汇编后即可生成编译程序(可执行),
再利用这个编译程序将自己的源代码变为目标代码.</li>
</ul></li>
<li>用高级语言编写, 普遍采用的方法.
<ul>
<li>例如用C语言写成的编译程序, 则先用C语言的编译器将C源程序编译为exe,
再用于分析其他语言, 也可以是C语言.</li>
</ul></li>
<li>自编译
<ul>
<li>先编写一个很小的编译程序的核心, 再由这个核心逐渐去分析,
编译其他代码.</li>
</ul></li>
<li>编译工具: LEX(词法分析), YACC(语法分析)</li>
<li>移植: 同种语言的编译程序在不同类型的机器之间移植</li>
</ul>
<h1 id="编译基础">编译基础</h1>
<p>高级语言是一个记号系统.</p>
<ul>
<li>语法</li>
<li>语义</li>
</ul>
<p><strong>语法</strong> 包括 <strong>词法规则</strong> 和
<strong>语法规则</strong></p>
<ul>
<li>词法规则: 判断每一个"单词"是否正确,
规定了哪些符号是是单词符号(最基本结构; 常数, 标识符, 基本字, 算符,
界限符等); 用正规式和有限自动机描述和分析</li>
<li>语法规则: 结合单词是否是语言中的语法单位(表达式),
规定如何用单词形成语法单位, 包括表达式, 子句, 语句, 函数, 过程,
程序等.</li>
</ul>
<p><strong>语义</strong> 给出单词符号和语法符号的意义,
大多数编译程序使用基于属性文法的语法制导翻译方法来分析语义.</p>
<p>重点是正规文法, 上下文无关文法及其对应的有限自动机和下推自动机.</p>
<h2 id="一些概念">一些概念</h2>
<p><strong>字母表</strong>: 符号的非空有穷集合, 用<span
class="math inline">\(V, \Sigma\)</span>表示.
所使用的符号均出自字符表.</p>
<p><strong>符号</strong>: 语言中最基本的不可再分的单位.</p>
<p><strong>符号串</strong>: 字符表中符号组成的有穷序列.
<strong>空串</strong> 用<span
class="math inline">\(\epsilon\)</span>表示.</p>
<p><strong>句子</strong>: 字母表上符合某种规则构成的串</p>
<p><strong>语言</strong>: 字母表上句子的集合</p>
<p>*小写字母表示符号, 大写字母表示集合, 希腊字母表示符号串.</p>
<h3 id="运算">运算</h3>
<p><strong>连接(乘积)运算</strong></p>
<p><span class="math display">\[
\begin{aligned}
  A &amp;= \{\alpha_1, \alpha_2, \cdots\} \\
  B &amp;= \{\beta_1, \beta_2, \cdots\} \\
  def:\quad AB &amp;= \{\alpha \beta | \alpha\in A\ and\ \beta\in B\}
\end{aligned}
\]</span> 其中<span class="math inline">\(A,B\)</span>是串集. 规定:
<span class="math inline">\(A^0=\{\epsilon\}\)</span>. 注意该运算
<strong>非可交换</strong>. 例子: <span
class="math inline">\(\alpha\)</span>表示<code>if ()</code>, <span
class="math inline">\(\beta\)</span>表示<code>then()</code>.</p>
<p><strong>闭包</strong></p>
<p><span class="math display">\[
A^\star=A^0\cup A^1 \cup A^2 \cup \cdots
\]</span></p>
<p>由A上所有符号组成的所有串的集合.</p>
<p><strong>正闭包</strong></p>
<p><span class="math display">\[
A^{+} = A^1 \cup A^2 \cup A^3 \cup \cdots = A^\star - {\epsilon}
\]</span></p>
<p><strong>文法</strong></p>
<p>描述语言的语法结构规则</p>
<ul>
<li><strong>非终结符</strong>: 出现在规则的左部,
用"&lt;&gt;"括起来或用大写字母表示, 表示一定语法概念的词, 用<span
class="math inline">\(V_N\)</span>表示</li>
<li><strong>终结符</strong>: 语言中不可以再分割的字符串, 用<span
class="math inline">\(V_T\)</span>表示</li>
<li><strong>开始符号</strong>: 表示所定义的语法范畴的非终结符,
表示该文法中最大的一个语法成分 (?比如说一个句子)</li>
<li><strong>产生式</strong>: 是用来定义符号串之间关系的一组语法规则,
<span class="math inline">\(A\rightarrow \alpha\)</span></li>
<li><strong>推导</strong>: 推导是从开始符号开始,
通过产生式的右部取代左部, 最终产生语言的一个句子的过程.
<ul>
<li><strong>最左推导</strong>: 每次使用一个规则,
以其右部取代符号串最左的非终结符.</li>
</ul></li>
<li><strong>归约</strong>: 推导的逆过程, 从给定的源语言的一个句子开始,
通过规则的左部取代右部, 最终达到开始符号的过程.
<ul>
<li><strong>最左归约</strong>: 最常采用</li>
</ul></li>
<li><strong>句型</strong>: 从文法的开始符号<span
class="math inline">\(S\)</span>开始,
每步推导(包括0步推导)所得到的字符串<span
class="math inline">\(\alpha\)</span>. 记作<span
class="math inline">\(S\rightarrow^\star \alpha, where\ \alpha\in (V_N
\cup V_T)^\star\)</span>
<ul>
<li><strong>句子</strong>: 仅含终结符的句型, 若能归约为开始符号,
则该句子是正确的</li>
</ul></li>
<li><strong>语言</strong>: 语言是由开始符号<span
class="math inline">\(S\)</span>通过1步或1步以上推导所得的句子的集合,
记为<span
class="math inline">\(L(G)=\{\alpha|S\rightarrow^+\alpha,\alpha\in
V_T^*\}\)</span></li>
<li><strong>文法规则的递归定义</strong>:
非终结符的定义中包含了非终结符自身</li>
</ul>
<h2 id="文法与语言的形式定义">文法与语言的形式定义</h2>
<p>Chomsky对文法的定义: 文法G是一个四元组<span
class="math inline">\((V_N, V_T, P, S)\)</span>, 其中<span
class="math inline">\(P\)</span>是文法规则的集合, <span
class="math inline">\(S\)</span>是开始符号</p>
<p><strong>0型文法</strong></p>
<p>又称短语文法或者无限制文法. <span
class="math inline">\(P\)</span>中产生式<span
class="math inline">\(\alpha\rightarrow\beta,\alpha\in V^+=(V_N\cup
V_T)^+\)</span>, <span
class="math inline">\(\alpha\)</span>至少含有一个非终结符,<span
class="math inline">\(\beta\in V^\star\)</span>.</p>
<ul>
<li>对产生式限制最少</li>
<li>图灵机</li>
<li>可递归可枚举</li>
</ul>
<p><strong>1型文法</strong></p>
<p><span class="math inline">\(P\)</span>中产生式<span
class="math inline">\(\alpha\rightarrow\beta\)</span>, 除可能有<span
class="math inline">\(S\rightarrow \epsilon\)</span>外均有<span
class="math inline">\(|\beta|\geq|\alpha|\)</span>, 若有<span
class="math inline">\(S\rightarrow\epsilon\)</span>, 规定<span
class="math inline">\(S\)</span>不能出现在产生式的右部.</p>
<p>等价定义: <span class="math inline">\(P\)</span>中产生式<span
class="math inline">\(\alpha\rightarrow\beta\)</span>除了可能有<span
class="math inline">\(S\rightarrow\epsilon\)</span>外均有<span
class="math inline">\(\alpha S \beta \rightarrow \alpha \gamma \beta,
\alpha, \beta \in V^\star, A\in V^n, \gamma\in V^+\)</span>.</p>
<div class="note note-info">
            <p>对非终结符进行替换时, 必须考虑上下文, 并且一般不允许替换为<spanclass="math inline">\(\epsilon\)</span>, 除非是开始符号产生<spanclass="math inline">\(\epsilon\)</span>.</p>
          </div>
<p><strong>2型文法</strong></p>
<p><span class="math inline">\(P\)</span>中产生式具有形式<span
class="math inline">\(A\rightarrow\beta, A\in V_N, \beta\in
V^\star\)</span>. 要求产生式左边只有一个非终结符.</p>
<p>不必考虑上下文, 上下文无关文法.</p>
<p>识别2型文法的自动机称为下推自动机</p>
<p><strong>3型文法</strong></p>
<p><span class="math inline">\(P\)</span>中产生式具有形式<span
class="math inline">\(A\rightarrow \alpha B, A\rightarrow
\alpha\)</span>或者<span class="math inline">\(A \rightarrow B\alpha,
A\rightarrow \alpha, A,B\in V_N, \alpha\in V_T^\star\)</span>.
也称为正规文法, (左|右)线性文法, 识别3型文法的自动机称为有限自动机.</p>
<div class="note note-info">
            <p>词法分析和语法分析中对产生式的限制: 1)不产生<spanclass="math inline">\(P\rightarrow P\)</span>,2)产生式中出现的任何非终结符必须有用, 能经过若干步推导出终结符</p>
          </div>
<p><strong>一些例子</strong></p>
<p><strong>例1</strong> 语言<span
class="math inline">\(L=\{\omega|\omega\in(a,b)^\star\)</span>且<span
class="math inline">\(\omega\)</span>中含有个数相同的<span
class="math inline">\(a,b\}\)</span>, 构造生成该语言的文法:</p>
<p><span class="math display">\[
\begin{align*}
  S&amp;\rightarrow\epsilon \\
  S&amp;\rightarrow aA\\
  S&amp;\rightarrow bB\\
  A&amp;\rightarrow aAA | bS\\
  B&amp;\rightarrow aS | bBB
\end{align*}
\]</span></p>
<p>解释: 要么以<span class="math inline">\(a\)</span>开头, 要么以<span
class="math inline">\(b\)</span>开头, 后面跟着符号串. 对于符号串<span
class="math inline">\(A\)</span>, 如果以<span
class="math inline">\(b\)</span>开头, 则后面跟着<span
class="math inline">\(ab\)</span>个数相等的符号串, 如果仍然以<span
class="math inline">\(a\)</span>开头, 此时后面必须还要至少出现两次<span
class="math inline">\(b\)</span>.</p>
<p>或者</p>
<p><span class="math display">\[
\begin{align*}
  S&amp;\rightarrow\epsilon\\
  S&amp;\rightarrow aSbS\\
  S&amp;\rightarrow bSaS
\end{align*}
\]</span></p>
<p>解释: 若以<span class="math inline">\(a\)</span>开头,
则在字符串的某个位置必然出现一个<span class="math inline">\(b\)</span>,
而这两个<span class="math inline">\(a,b\)</span>中间是<span
class="math inline">\(ab\)</span>个数相等的的字符串, b后面也是<span
class="math inline">\(ab\)</span>个数相等的符号串.</p>
<p><strong>例2</strong> 设<span class="math inline">\(L=\{\omega |
\omega\in(0,1)^\star\)</span>且<span
class="math inline">\(1\)</span>的个数为偶数个<span
class="math inline">\(\}\)</span>, 构造生成该语言的文法:</p>
<p>可以先列出看一下:</p>
<p><span class="math display">\[
\omega\in\{\epsilon, 0, 11, 011, 101, 110,\cdots\}
\]</span></p>
<p>然后:</p>
<p><span class="math display">\[
\begin{align*}
  S&amp;\rightarrow\epsilon\\
  S&amp;\rightarrow 0S\\
  S&amp;\rightarrow 1A\\
  A&amp;\rightarrow 1S | 0A
\end{align*}
\]</span></p>
<h2 id="文法的构造与简化">文法的构造与简化</h2>
<h3 id="简化">简化</h3>
<p>同一语言可以产生不同的文法, 选择产生式最少,
最符合语言特征的文法来描述; 有些产生式对推导不起作用, 包括:
<strong>推导中永远用不到, 永远导不出终结符的, 形如<span
class="math inline">\(P\rightarrow P\)</span>的...</strong></p>
<p><strong>一些例子</strong></p>
<p><strong>例1</strong> 简化文法:</p>
<p><span class="math display">\[
\begin{align*}
  S&amp;\rightarrow Be\\
  S&amp;\rightarrow Ee\\
  A&amp;\rightarrow Ae\\
  A&amp;\rightarrow e\\
  A&amp;\rightarrow A\\
  B&amp;\rightarrow Ce\\
  B&amp;\rightarrow Af\\
  C&amp;\rightarrow Cf\\
  D&amp;\rightarrow f
\end{align*}
\]</span></p>
<p>显然应该保留0236.</p>
<h3 id="构造">构造</h3>
<p><strong>构造无<span
class="math inline">\(\epsilon\)</span>产生式的上下文无关文法</strong></p>
<p>满足: <span class="math inline">\(P\)</span>中要么不含有<span
class="math inline">\(\epsilon\)</span>产生式, 要么只有<span
class="math inline">\(S\rightarrow\epsilon\)</span>, 且若<span
class="math inline">\(S\rightarrow\epsilon\)</span>, 则<span
class="math inline">\(S\)</span>不出现在任何产生式右部.</p>
<h1 id="语义分析与中间代码生成">语义分析与中间代码生成</h1>
<p><strong>在语法分析的过程中边分析边翻译,
翻译的结果是生成中间代码</strong></p>
<p><strong>语法制导翻译</strong>
在语法分析中调用语义翻译程序生成相应的中间代码,
使用CFG来引导对语言的翻译, 面向文法</p>
<ul>
<li>根据产生式右部符号进行翻译</li>
<li>依据语义子程序
<ul>
<li>语义子程序: 用于改变变量的值, 查填符号表, 发现源程序错误,
产生中间代码</li>
</ul></li>
</ul>
<p><span class="math display">\[
X \rightarrow \alpha \{语义子程序\}
\]</span></p>
<ul>
<li>具体做法: <strong>为每一个产生式配置一个语义子程序,
当语法分析进行归约或推导时调用相应的语义子程序</strong></li>
<li>注意: <strong>产生式中同一个符号出现多次, 需要区分,
加上角标</strong></li>
</ul>
<p><span class="math display">\[
E \rightarrow E_1 + E_2
\]</span></p>
<ul>
<li>语义值: <strong>需要为每个文法符号赋予不同的语义值</strong>, 如类型,
(符号表) 地址, 代码值 (不是数字), 并且
<strong>只有非终结符才有语义值</strong></li>
<li>语义栈: 各个符号的语义值放在语义栈中. 产生式进行归约时,
需对右部符号的语义值进行综合, 结果作为左部符号的语义值保存在语义栈中.
<strong>语义栈, 符号栈, 状态栈同步变化</strong></li>
</ul>
<p><strong>中间代码</strong> 转化为目标代码的中间生成的代码,
容易翻译</p>
<ul>
<li>形式
<ul>
<li>四元式: <span class="math inline">\(Operator, Op_1, Op_2,
Result\)</span>, 两个操作数和结果可以是用户自定义, 也可以是编译时变量.
变量采用的是符号表入口地址.</li>
<li>三元式: <span class="math inline">\(Operator, Op_1, Op_2\)</span>,
三元式本身就是结果, 以三元式的编号区别</li>
<li>逆波兰式 (后缀表示): <span class="math inline">\(Op_1, Op_2,
Operator\)</span>, 无括号, 从左到右扫描一遍</li>
<li>树形表示</li>
</ul></li>
</ul>
<h2 id="赋值语句-简单变量无数组-的翻译">赋值语句 (简单变量无数组)
的翻译</h2>
<p><strong>文法</strong>:</p>
<p>$$ A i = E \</p>
<p>E E + E | E * E | -E | (E) | i $$</p>
<p><strong>内置函数</strong>:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">NEWTEMP  # 产生临时变量<br>ENRTY(i)  # 获取变量i的符号表地址<br>GEN(operator, op1, op2, result)  # 生成四元式中间代码<br></code></pre></td></tr></table></figure>
<p><strong>语义变量</strong>:</p>
<p><span class="math display">\[
E.PLACE
\]</span></p>
<ul>
<li>值是某个变量的符号表地址或临时变量的序号</li>
<li>分析过程需要就建立, 不需要就消亡</li>
</ul>
<p><strong>建立语法制导定义 (SDD)</strong>:</p>
<table>

<thead>
<tr class="header">
<th>产生式</th>
<th>语义规则 (子程序)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(A \rightarrow i = E\)</span></td>
<td>{<span class="math inline">\(GEN(=, E.PLACE, NULL,
ENTRY(i))\)</span>}</td>
</tr>
<tr class="even">
<td><span class="math inline">\(E \rightarrow -E_1\)</span></td>
<td>{<span class="math inline">\(T = NEWTEMP; GEN(@, E_1.PLACE, NULL,
T); E.PLACE = T;\)</span>}</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(E \rightarrow E_1 * E_2\)</span></td>
<td>{<span class="math inline">\(T = NEWTEMP; GEN(*, E_1.PLACE,
E_2.PLACE, T); E.PLACE = T;\)</span>}</td>
</tr>
<tr class="even">
<td><span class="math inline">\(E \rightarrow E_1 + E_2\)</span></td>
<td>{<span class="math inline">\(T = NEWTEMP; GEN(+, E_1.PLACE,
E_2.PLACE, T); E.PLACE = T;\)</span>}</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(E \rightarrow (E_1)\)</span></td>
<td>{<span class="math inline">\(E.PLACE = E_1.PLACE\)</span>}</td>
</tr>
<tr class="even">
<td><span class="math inline">\(E \rightarrow i\)</span></td>
<td>{<span class="math inline">\(E.PLACE = ENTRY(i)\)</span>}</td>
</tr>
</tbody>
</table>
<h3 id="类型转换">类型转换</h3>
<p>处理混合运算, 如整型与实型运算, 最后的结果为实型</p>
<p><strong>语义变量</strong>:</p>
<p><span class="math display">\[
E.MODE
\]</span></p>
<p><strong>建立语法制导定义 (SDD)</strong>:</p>
<table>

<thead>
<tr class="header">
<th>产生式</th>
<th>语义规则</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(E \rightarrow E_1\ op\ E_2\)</span></td>
<td>{<span class="math inline">\(IF\ E_1.MODE = int\ AND\ E_2.MODE =
int\ THEN\ E.MODE = int\ ELSE\ E.MODE = real\)</span>}</td>
</tr>
</tbody>
</table>
<p>例如 <span class="math inline">\(X = Y + I * J\)</span>, 其中<span
class="math inline">\(X, Y\)</span>是实型的, <span
class="math inline">\(I, J\)</span>是整型的, 四元式为:</p>
<p><span class="math display">\[
(*_i, I, J, T_1) \\
(itr, T_1, NULL, T_2) \\
(+_r, Y, T_2, T_3) \\
(=, T_3, NULL, X)
\]</span></p>
<p>对运算符也要指出相应的类型.</p>
<h2 id="布尔表达式的翻译">布尔表达式的翻译</h2>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/CS/" class="category-chain-item">CS</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Compiler-zh</div>
      <div>https://andrew-rey.github.io/2022/09/05/CS/Compiler-zh/</div>
    </div>
    <div class="license-meta">
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>September 5, 2022</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/12/Life/Code/" title="今天又是码代码的一天呢">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">今天又是码代码的一天呢</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/01/Android/AndroidBasic/" title="AndroidBasic">
                        <span class="hidden-mobile">AndroidBasic</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
